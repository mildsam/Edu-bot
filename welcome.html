<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EDU BOT AI Interface</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Lucide Icons for high-quality SVG icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        /* Define the primary color and font */
        :root {
            --primary-color: #7A1F7A; /* Deep Purple */
            --secondary-color: #A038A0; /* Lighter Purple for hover */
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #E5E5E5; /* Light grey background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .primary-bg {
            background-color: var(--primary-color);
        }
        .primary-text {
            color: var(--primary-color);
        }
        .btn-primary {
            background-color: var(--primary-color);
            transition: background-color 0.2s;
        }
        .btn-primary:hover {
            background-color: var(--secondary-color);
        }

        /* ======================================= */
        /* Animated Login Input Styles */
        /* ======================================= */
        .animated-input {
            border: none;
            border-bottom: 2px solid #ccc;
            padding: 10px 0;
            transition: border-bottom-color 0.3s ease;
            position: relative;
            outline: none;
        }
        .animated-input:focus {
            border-bottom-color: transparent;
        }
        .animated-input-container {
            position: relative;
        }
        /* The expanding purple line on focus */
        .animated-input-container:focus-within .animated-input::after {
            width: 100%;
        }
        .animated-input::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background-color: var(--primary-color);
            transition: width 0.3s ease-out;
        }

        /* ======================================= */
        /* Chat Bubble Styles */
        /* ======================================= */
        .user-bubble {
            background-color: var(--primary-color);
            color: white;
            align-self: flex-end;
            margin-left: auto;
        }
        .bot-bubble {
            background-color: #f3f4f6; /* light gray */
            color: #333;
            align-self: flex-start;
            border: 1px solid #e5e7eb;
            margin-right: auto;
        }

        /* Specific styling for the large chat/app container */
        .app-container {
            max-width: 1400px;
            width: 100%;
            height: 100vh;
            max-height: 95vh;
            transition: all 0.3s ease-in-out;
            overflow: hidden;
        }

        /* Customize scrollbar for the chat history sidebar */
        .sidebar-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .sidebar-scroll::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }
        .sidebar-scroll::-webkit-scrollbar-track {
            background: transparent;
        }

        /* Mobile specific style for chat view */
        @media (max-width: 768px) {
            .app-container {
                max-height: 100vh;
                border-radius: 0;
            }
            #sidebar {
                /* transform: translateX(-100%);
                transition: transform 0.3s ease-in-out;
                z-index: 20; */
                 /* FIX: Ensure it covers full size, is anchored left, and is off-screen by default */
                width: 100%; 
                height: 100%;
                left: 0; /* Anchor the absolute position to the left edge */
                transform: translateX(-100%); /* Start off-screen */
                transition: transform 0.3s ease-in-out;
                z-index: 20;
            }
            #sidebar.open {
                transform: translateX(0);
                box-shadow: 5px 0 15px rgba(0,0,0,0.2);
            }
            #chatView .main-content {
                width: 100%;
            }
        }
    </style>
</head>
<body class="bg-gray-100">

    <div id="app" class="app-container bg-white shadow-2xl rounded-xl">
        
        <!-- ============================================== -->
        <!-- 1. LOGIN VIEW -->
        <!-- ============================================== -->
        <div id="loginView" class="view flex h-full p-4 md:p-10">
            <div class="hidden md:flex flex-col justify-center items-center w-2/5 primary-bg rounded-xl p-8">
                <div class="bg-white rounded-full p-6 w-52 h-52 flex justify-center items-center mb-6 shadow-inner">
                    <div class="absolute">
                         <i data-lucide="book-open-check" class="w-24 h-24 text-[#7A1F7A]"></i>
                    </div>
                </div>
                <h2 class="text-3xl font-bold text-white text-center">Welcome Back</h2>
                <p class="text-sm text-white/80 mt-2 text-center">Log in to continue accessing educational assistance.</p>
            </div>
            
            <div class="w-full md:w-3/5 p-4 md:p-12 flex flex-col justify-center">
                <h1 class="text-3xl md:text-4xl font-extrabold primary-text mb-8 tracking-wider">LOGIN</h1>
                
                <form id="loginForm" class="space-y-6">
                    <div>
                        <label for="login-email" class="block text-sm font-medium text-gray-700">Email:</label>
                        <div class="animated-input-container mt-1">
                            <input type="email" id="login-email" value="Foertuneedosa784@Gmail.Com" class="animated-input block w-full bg-transparent" placeholder="Enter your email">
                        </div>
                    </div>

                    <div>
                        <label for="login-password" class="block text-sm font-medium text-gray-700">Password:</label>
                        <div class="relative mt-1">
                            <div class="animated-input-container">
                                <input type="password" id="login-password" value="............" class="animated-input block w-full bg-transparent pr-10" placeholder="••••••••••••">
                            </div>
                            <i data-lucide="rotate-ccw" class="w-4 h-4 text-gray-500 absolute right-0 top-3 cursor-pointer"></i>
                        </div>
                        <a href="#" class="text-xs text-gray-500 hover:text-primary-color float-right mt-1">FORGOTTEN PASSWORD</a>
                    </div>
                    
                    <div class="pt-8 flex flex-col items-start">
                        <button type="submit" class="btn-primary text-white font-semibold py-3 px-10 rounded-lg shadow-lg">
                            Login
                        </button>
                        <p class="text-sm text-gray-600 mt-4">
                            Don't have an Account? 
                            <a href="#" id="toSignUpLink" class="primary-text font-semibold hover:underline">Sign Up</a>
                        </p>
                    </div>
                </form>
            </div>
        </div>

        <!-- ============================================== -->
        <!-- 1B. SIGN UP / CREATE ACCOUNT VIEW (NEW) -->
        <!-- ============================================== -->
        <div id="signUpView" class="view hidden flex h-full p-4 md:p-10">
            <div class="hidden md:flex flex-col justify-center items-center w-2/5 primary-bg rounded-xl p-8">
                <div class="bg-white rounded-full p-6 w-52 h-52 flex justify-center items-center mb-6 shadow-inner">
                    <div class="absolute">
                         <i data-lucide="user-plus" class="w-24 h-24 text-[#7A1F7A]"></i>
                    </div>
                </div>
                <h2 class="text-3xl font-bold text-white text-center">New Beginnings</h2>
                <p class="text-sm text-white/80 mt-2 text-center">Join EDU BOT to revolutionize your learning experience.</p>
            </div>
            
            <div class="w-full md:w-3/5 p-4 md:p-12 flex flex-col justify-center">
                <h1 class="text-3xl md:text-4xl font-extrabold primary-text mb-8 tracking-wider">CREATE ACCOUNT</h1>
                
                <form id="signUpForm" class="space-y-6">
                    <div>
                        <label for="signup-name" class="block text-sm font-medium text-gray-700">Name:</label>
                        <div class="animated-input-container mt-1">
                            <input type="text" id="signup-name" class="animated-input block w-full bg-transparent" placeholder="Enter your name">
                        </div>
                    </div>
                    
                    <div>
                        <label for="signup-email" class="block text-sm font-medium text-gray-700">Email:</label>
                        <div class="animated-input-container mt-1">
                            <input type="email" id="signup-email" class="animated-input block w-full bg-transparent" placeholder="Enter your email">
                        </div>
                    </div>

                    <div>
                        <label for="signup-password" class="block text-sm font-medium text-gray-700">Password:</label>
                        <div class="relative mt-1">
                             <div class="animated-input-container">
                                <input type="password" id="signup-password" class="animated-input block w-full bg-transparent pr-10" placeholder="••••••••••••">
                            </div>
                            <i data-lucide="key" class="w-4 h-4 text-gray-500 absolute right-0 top-3 cursor-pointer"></i>
                        </div>
                    </div>
                    
                    <div class="pt-8 flex flex-col items-start">
                        <button type="submit" class="btn-primary text-white font-semibold py-3 px-10 rounded-lg shadow-lg">
                            Sign Up
                        </button>
                        <p class="text-sm text-gray-600 mt-4">
                            Already Have An Account? 
                            <a href="#" id="toLoginLink" class="primary-text font-semibold hover:underline">Login</a>
                        </p>
                    </div>
                </form>
            </div>
        </div>

        <!-- ============================================== -->
        <!-- 2. WELCOME SCREEN VIEW -->
        <!-- ============================================== -->
        <div id="welcomeView" class="view hidden h-full flex justify-center items-center primary-bg rounded-xl">
            <div class="text-center p-10">
                <div class="bg-white rounded-full p-4 w-32 h-32 flex justify-center items-center mx-auto mb-8 shadow-xl">
                     <i data-lucide="bot" class="w-20 h-20 primary-text"></i>
                </div>
                <h1 class="text-5xl md:text-6xl font-extrabold text-white tracking-wide">
                    Welcome <br> Back !!!
                </h1>
            </div>
        </div>

        <!-- ============================================== -->
        <!-- 3. MAIN CHAT APPLICATION VIEW -->
        <!-- ============================================== -->
        <div id="chatView" class="view hidden h-full flex flex-col md:flex-row relative">
            
            <!-- Sidebar / Chat History Panel -->
            <div id="sidebar" class="primary-bg w-full md:w-80 flex-shrink-0 flex flex-col rounded-l-l absolute md:relative h-full sidebar-scroll overflow-y-auto p-4 md:p-6">
                
                <!-- Header and Toggle Button (Mobile only) -->
                <div class="flex justify-between items-center mb-6">
                    <h1 class="text-xl font-bold text-white flex items-center">
                        EDU BOT 
                        <span class="text-xs font-normal text-white/50 ml-2">V. 1.0.0</span>
                    </h1>
                    <button id="sidebarToggle" class="text-white md:hidden p-2 rounded-full hover:bg-white/10">
                        <i data-lucide="menu"></i>
                    </button>
                </div>

                <!-- Chat History Section -->
                <div id="historyList" class="flex-grow text-white/90 space-y-4">
                    <!-- History items will be dynamically rendered here -->
                </div>

                <!-- New Chat Button -->
                <div class="py-4">
                    <button id="newChatButton" class="w-full bg-white text-primary-color font-semibold py-3 rounded-lg hover:bg-gray-200 transition-colors">
                        New Chat
                    </button>
                </div>

                <!-- User Profile Footer -->
                <div class="border-t border-white/20 pt-4 flex items-center">
                    <i data-lucide="user" class="w-5 h-5 text-white/70 mr-3"></i>
                    <div>
                        <p class="text-sm font-semibold text-white/90">Username: Osiariemenfortune</p>
                        <p class="text-xs text-white/60">Email: Osiariemenfort@gmail.com</p>
                    </div>
                </div>
            </div>

            <!-- Main Chat Area -->
            <div class="main-content flex-grow flex flex-col bg-white rounded-r-xl w-full">
                
                <!-- Chat Header / Search Bar -->
                <div class="p-4 md:p-6 border-b border-gray-200">
                    <div class="relative flex items-center bg-white border border-primary-color/50 rounded-lg shadow-sm">
                        <input type="text" id="searchBarInput" placeholder="Search..." class="w-full p-3 pr-24 text-base focus:ring-primary-color focus:border-primary-color border-none rounded-lg">
                        <div class="absolute right-0 flex items-center pr-2 space-x-2">
                            <!-- X Button (Clear Search) -->
                            <i data-lucide="x" id="clearSearchBtn" class="w-5 h-5 text-gray-400 cursor-pointer hover:text-gray-600"></i>
                            <!-- Mic Button (Simulate Voice Search) -->
                            <i data-lucide="mic" id="micSearchBtn" class="w-5 h-5 primary-text cursor-pointer hover:text-secondary-color"></i>
                        </div>
                        <!-- Mobile Sidebar Toggle (for opening the sidebar when it's closed) -->
                        <button id="sidebarToggleOpen" class="text-primary-color md:hidden p-2 rounded-full hover:bg-gray-100 absolute left-[-40px] top-1/2 transform -translate-y-1/2">
                            <i data-lucide="menu"></i>
                        </button>
                    </div>
                </div>

                <!-- Chat Messages / Content Area -->
                <div id="messageBox" class="flex-grow p-4 md:p-6 overflow-y-auto flex flex-col space-y-4">
                    <!-- Messages will be injected here by JavaScript -->
                </div>

                <!-- Chat Input Footer -->
                <div class="p-4 md:p-6 border-t border-gray-200">
                    <div class="relative">
                        <input type="text" id="chatInput" placeholder="Write a Message" class="w-full bg-gray-50 border border-gray-200 rounded-lg p-4 pr-12 text-base focus:ring-primary-color focus:border-primary-color">
                        <button id="sendButton" class="absolute right-2 top-1/2 transform -translate-y-1/2 primary-bg text-white p-2 rounded-full hover:opacity-90 transition-opacity">
                            <i data-lucide="arrow-up" class="w-5 h-5"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global state for views
        const views = {
            loginView: document.getElementById('loginView'),
            signUpView: document.getElementById('signUpView'),
            welcomeView: document.getElementById('welcomeView'),
            chatView: document.getElementById('chatView')
        };
        
        // DOM Elements
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        const sidebarToggleOpen = document.getElementById('sidebarToggleOpen');
        const loginForm = document.getElementById('loginForm');
        const signUpForm = document.getElementById('signUpForm');
        const toSignUpLink = document.getElementById('toSignUpLink');
        const toLoginLink = document.getElementById('toLoginLink');
        const messageBox = document.getElementById('messageBox');
        const chatInput = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendButton');
        const newChatButton = document.getElementById('newChatButton');
        const historyList = document.getElementById('historyList');
        const searchBarInput = document.getElementById('searchBarInput');
        const clearSearchBtn = document.getElementById('clearSearchBtn');
        const micSearchBtn = document.getElementById('micSearchBtn');

        let currentView = 'loginView';

        // Mock Chat History Data
        const mockHistory = [
            {
                id: 'today1', time: '2:30 PM', title: 'How Can Write A Code For My Projec...', date: '2 Oct 2025',
                dialogue: [
                    { sender: 'user', text: 'How can I write a clean, efficient Python script for file parsing?' },
                    { sender: 'bot', text: 'Start with object-oriented principles, use context managers (`with open(...)`), and leverage libraries like `csv` or `pandas` for structured data. Focus on clear function names and comments.' },
                ]
            },
            {
                id: 'today2', time: '3:30 PM', title: 'Create UI/UX Description For My Por...', date: '2 Oct 2025',
                dialogue: [
                    { sender: 'user', text: 'I need a UI/UX description for a school project. Can you help?' },
                    { sender: 'bot', text: 'I can! The design is clean, uses a dark purple primary color (#7A1F7A), and features a responsive sidebar. It’s perfect for a modern web app presentation.' },
                ]
            },
            {
                id: 'today3', time: '3:30 PM', title: 'When Was The First Book Of UI/UX Pub...', date: '2 Oct 2025',
                dialogue: [
                    { sender: 'user', text: 'When was the first book of UI/UX published?' },
                    { sender: 'bot', text: 'While the concepts are old, the term "User Experience" was popularized by Don Norman in the 1990s. Early books on Human-Computer Interaction trace back to the 1980s.' },
                ]
            },
             {
                id: 'yesterday1', time: '2:30 PM', title: 'How Can Write A Code For My Projec...', date: '31 Sept 2025',
                dialogue: [
                    { sender: 'user', text: 'I have an older chat about project coding, load that one.' },
                    { sender: 'bot', text: 'Sure! This older chat focused on JavaScript promises. Remember to always handle your error states with `.catch()`!' },
                ]
            }
        ];
        
        /**
         * Clears all messages from the chat box.
         */
        function clearChat() {
            messageBox.innerHTML = '';
        }


        /**
         * Switches the active view in the SPA
         */
        function showView(viewName) {
            Object.values(views).forEach(view => view.classList.add('hidden'));

            const targetView = views[viewName];
            if (targetView) {
                targetView.classList.remove('hidden');
                currentView = viewName;

                if (viewName === 'chatView') {
                    // Check if it's a completely new chat session
                    if (messageBox.children.length === 0) {
                        renderMessage("Hello! I am EDU BOT. How can I assist you with your project today?", false);
                    }
                    
                    // Handle sidebar visibility on initial load/switch
                    if (window.innerWidth < 768) {
                        sidebar.classList.remove('open');
                        sidebarToggleOpen.classList.remove('hidden');
                    } else {
                        sidebar.classList.add('open');
                        sidebarToggleOpen.classList.add('hidden');
                    }
                    // Focus on the chat input
                    chatInput.focus();
                }
            }
        }

        /**
         * Toggles the visibility of the sidebar on small screens
         */
        function toggleSidebar() {
            if (window.innerWidth < 768) {
                sidebar.classList.toggle('open');
                if (sidebar.classList.contains('open')) {
                    sidebarToggleOpen.classList.add('hidden');
                } else {
                    sidebarToggleOpen.classList.remove('hidden');
                }
            }
        }

        /* ======================================= */
        /* Chat Functionality */
        /* ======================================= */
        
        /**
         * Creates and appends a message bubble to the chat box.
         */
        function renderMessage(text, isUser) {
            const bubble = document.createElement('div');
            const baseClasses = 'max-w-xs md:max-w-md p-3 rounded-2xl shadow transition-all duration-300 ease-in-out';
            
            bubble.className = `${baseClasses} ${isUser ? 'user-bubble rounded-br-none' : 'bot-bubble rounded-tl-none'}`;
            
            // Logic for the "typing" indicator
            if (text === 'EDU BOT is thinking...') {
                 bubble.classList.remove('shadow');
                 bubble.textContent = text;
                 bubble.innerHTML = `<div class="flex items-center space-x-1">
                     <span class="w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-75"></span>
                     <span class="w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-150"></span>
                     <span class="w-2 h-2 bg-gray-500 rounded-full animate-bounce delay-300"></span>
                     <span class="text-sm ml-1 text-gray-500">EDU BOT is thinking...</span>
                 </div>`;
                 bubble.classList.add('bot-bubble');
            } else {
                 bubble.textContent = text;
            }

            messageBox.appendChild(bubble);

            // Scroll to the bottom of the message box
            messageBox.scrollTop = messageBox.scrollHeight;
        }

        /**
         * Simulated Bot Response logic.
         */
        function simulateBotResponse(userMessage) {
            // Show a typing indicator first
            renderMessage('EDU BOT is thinking...', false);
            
            // Simple response logic
            let botText;
            if (userMessage.toLowerCase().includes('code')) {
                botText = "I can certainly help with code! Which language and project structure are you considering for your coursemate?";
            } else if (userMessage.toLowerCase().includes('ui/ux')) {
                botText = "The UI/UX looks great! To match the design perfectly, try using the primary color: #7A1F7A (Deep Purple).";
            } else {
                botText = "Thank you for your message! This is a simple frontend simulation, but I'm ready to be integrated with a powerful AI model like Gemini. How else can I assist with your project?";
            }
            
            // Remove typing indicator after a delay and show actual response
            setTimeout(() => {
                if (messageBox.lastChild && messageBox.lastChild.textContent.includes('BOT is thinking')) {
                    messageBox.removeChild(messageBox.lastChild); 
                }
                renderMessage(botText, false);
            }, 1500);
        }

        /**
         * Handle sending a message.
         */
        function sendMessage() {
            const userMessage = chatInput.value.trim();
            if (userMessage === '') return;

            renderMessage(userMessage, true);
            chatInput.value = '';
            simulateBotResponse(userMessage);
        }

        /* ======================================= */
        /* History Functions */
        /* ======================================= */
        
        /**
         * Renders all mock history items into the sidebar.
         */
        function renderHistory() {
            historyList.innerHTML = ''; // Clear existing list
            
            // Group history by date
            const groupedHistory = mockHistory.reduce((acc, item) => {
                const dateKey = item.date;
                if (!acc[dateKey]) {
                    acc[dateKey] = { date: dateKey, items: [] };
                }
                acc[dateKey].items.push(item);
                return acc;
            }, {});

            // Render groups
            for (const dateKey in groupedHistory) {
                const group = groupedHistory[dateKey];
                const groupDiv = document.createElement('div');
                groupDiv.className = 'space-y-2';
                groupDiv.innerHTML = `<h3 class="text-sm font-semibold text-white/70">${dateKey.split(' ')[0]} <span class="text-xs font-normal ml-2">${dateKey}</span></h3><div class="space-y-1 text-sm font-medium"></div>`;
                
                const itemsContainer = groupDiv.querySelector('div.space-y-1');

                group.items.forEach(item => {
                    const itemAnchor = document.createElement('a');
                    itemAnchor.href = '#';
                    itemAnchor.className = 'block p-2 rounded-lg hover:bg-white/10 truncate';
                    itemAnchor.textContent = `${item.time} ${item.title}`;
                    itemAnchor.dataset.chatId = item.id;
                    itemAnchor.addEventListener('click', (e) => loadHistory(e, item.id));
                    itemsContainer.appendChild(itemAnchor);
                });
                
                historyList.appendChild(groupDiv);
            }
            
            // Add the 'show more' chevron at the end
            const chevronDiv = document.createElement('div');
            chevronDiv.className = 'py-2';
            chevronDiv.innerHTML = '<a href="#" class="block p-2 rounded-lg hover:bg-white/10 text-center text-white/70"><i data-lucide="chevron-down" class="w-5 h-5 inline-block"></i></a>';
            historyList.appendChild(chevronDiv);
            lucide.createIcons(); // Re-create icons after adding new elements
        }

        /**
         * Loads a past chat dialogue into the main view.
         */
        function loadHistory(e, chatId) {
            e.preventDefault();
            const chat = mockHistory.find(c => c.id === chatId);
            if (!chat) return;

            clearChat();
            chat.dialogue.forEach(msg => {
                renderMessage(msg.text, msg.sender === 'user');
            });
            
            // Close sidebar on mobile after loading a chat
            if (window.innerWidth < 768) {
                toggleSidebar();
            }
        }

        /* ======================================= */
        /* Event Listeners */
        /* ======================================= */

        // 1. Initial Load: Show Login View and Render History
        showView('loginView');
        renderHistory();

        // 2. Login/Signup Form Submission Handlers
        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            showView('welcomeView');
            setTimeout(() => { showView('chatView'); }, 2000); 
        });

        signUpForm.addEventListener('submit', (e) => {
            e.preventDefault();
            // In a real app, this would register the user.
            showView('welcomeView'); 
            setTimeout(() => { showView('chatView'); }, 2000); 
        });
        
        // 3. View Switchers
        toSignUpLink.addEventListener('click', (e) => {
            e.preventDefault();
            showView('signUpView');
        });

        toLoginLink.addEventListener('click', (e) => {
            e.preventDefault();
            showView('loginView');
        });
        
        // 4. Sidebar Toggle Event Listeners
        sidebarToggle.addEventListener('click', toggleSidebar);
        sidebarToggleOpen.addEventListener('click', toggleSidebar);

        // 5. Chat Actions
        newChatButton.addEventListener('click', () => {
            clearChat();
            renderMessage("A new chat session has started. What topic should we explore now?", false);
        });
        
        // 6. Chat Input/Send Listeners
        if (sendButton && chatInput) {
            sendButton.addEventListener('click', sendMessage);
            chatInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault(); 
                    sendMessage();
                }
            });
        }
        
        // 7. Search Bar Button Functionality (FIXED/REFINED)
        if (clearSearchBtn && searchBarInput) {
            clearSearchBtn.addEventListener('click', () => {
                searchBarInput.value = '';
                searchBarInput.focus();
            });
        }

        micSearchBtn.addEventListener('click', () => {
            const mockVoiceQuery = "Search for the latest trends in educational technology.";
            searchBarInput.value = mockVoiceQuery;
            clearChat();
            renderMessage(`[Simulated Voice Input]: ${mockVoiceQuery}`, true);
            simulateBotResponse(`Simulate search for ${mockVoiceQuery}`);
        });

        // 8. Handle resize for responsive sidebar
        window.addEventListener('resize', () => {
             if (window.innerWidth >= 768) {
                sidebar.classList.add('open');
                sidebarToggleOpen.classList.add('hidden');
             } else if (currentView === 'chatView' && !sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
                sidebarToggleOpen.classList.remove('hidden');
             }
        });

    </script>
</body>
</html>